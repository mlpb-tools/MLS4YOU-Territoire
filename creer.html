<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Cr√©er ‚Äî Ce que je sais d√©j√† faire | MLS4YOU Territoire</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@600;700;800&family=Montserrat:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <script src="https://unpkg.com/lucide@0.263.1/dist/umd/lucide.min.js"></script>

  <style>
    :root{
      --red:#C62828;
      --yellow:#FFC928;
      --turq:#20B8AE;
      --mint:#BFEFE8;
      --orange:#FFB067;

      --ink:#101114;
      --muted: rgba(16,17,20,.72);
      --bg:#FFF9F0;
      --paper:#ffffff;

      --shadow: 0 18px 36px rgba(16,17,20,.10);
      --stroke: 3px;
      --radius: 18px;
      --max: 980px;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:'Montserrat',system-ui,-apple-system,sans-serif;
      background: var(--bg);
      color: var(--ink);
      overflow-x:hidden;
    }
    h1,h2,h3,.baloo{font-family:'Baloo 2',cursive; font-weight:800; letter-spacing:-.02em;}
    a{color:inherit}

    /* background */
    .bg{
      position: fixed; inset:0; pointer-events:none; z-index:0; overflow:hidden;
    }
    .blob{position:absolute; border-radius:999px; filter: blur(2px); opacity:.65;}
    .b1{width:420px;height:420px; left:-140px; top:-140px; background:rgba(255,201,40,.35);}
    .b2{width:360px;height:360px; right:-140px; top:18%; background:rgba(198,40,40,.16);}
    .b3{width:480px;height:480px; left:-200px; bottom:-150px; background:rgba(255,176,103,.30);}
    .b4{width:320px;height:320px; right:-80px; bottom:-100px; background:rgba(32,184,174,.12);}

    .wrap{
      position: relative;
      z-index: 1;
      max-width: var(--max);
      margin: 18px auto 28px;
      padding: 0 16px 28px;
    }

    .frame{
      border-radius: 24px;
      overflow:hidden;
      border: 5px solid transparent;
      background-image:
        linear-gradient(rgba(255,255,255,.95), rgba(255,255,255,.95)),
        linear-gradient(135deg, var(--red), var(--yellow), var(--turq));
      background-origin: border-box;
      background-clip: padding-box, border-box;
      box-shadow: 0 22px 44px rgba(0,0,0,.10);
    }

    /* topbar */
    .topbar{
      padding: 14px 16px;
      background: #fff;
      border-bottom: 4px solid var(--yellow);
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
    }
    .back{
      display:inline-flex; align-items:center; gap:10px;
      text-decoration:none;
      font-weight:800;
      font-size:12px;
      text-transform:uppercase;
      letter-spacing:.05em;
      color: var(--muted);
      padding:10px 12px;
      border-radius:999px;
      border:2px solid rgba(16,17,20,.10);
      background: #fff;
      transition:.18s ease;
      white-space:nowrap;
    }
    .back:hover{transform: translateY(-1px); border-color: var(--yellow); color: var(--ink); box-shadow: 0 8px 18px rgba(16,17,20,.08);}
    .crumb{
      display:inline-flex; align-items:center; gap:8px;
      font-weight:800; font-size:12px; color: var(--muted);
      text-transform:uppercase; letter-spacing:.06em;
    }
    .badge{
      display:inline-flex; align-items:center; gap:8px;
      font-weight:900;
      padding:10px 12px;
      border-radius:999px;
      border: 3px solid var(--ink);
      background: rgba(255,201,40,.22);
      box-shadow: 6px 6px 0 rgba(16,17,20,.08);
      text-transform:uppercase;
      letter-spacing:.04em;
      font-size:12px;
      white-space:nowrap;
    }

    /* hero */
    .hero{ padding: 18px 16px 0; background:#fff; }
    .heroCard{
      position:relative;
      border-radius: 22px;
      padding: 18px 18px;
      border: 4px solid var(--ink);
      background: linear-gradient(180deg, rgba(255,201,40,.28), rgba(255,255,255,.92));
      box-shadow: 10px 10px 0 rgba(16,17,20,.08);
      overflow:hidden;
    }
    .grain{
      position:absolute; inset:0; opacity:.07; pointer-events:none;
      background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");
    }
    .heroTop{ display:flex; align-items:flex-start; justify-content:space-between; gap:14px; }
    .kicker{
      display:inline-flex; align-items:center; gap:8px;
      background: var(--yellow);
      color: var(--ink);
      font-weight:900;
      padding: 10px 12px;
      border-radius: 999px;
      border: 3px solid var(--ink);
      box-shadow: 6px 6px 0 rgba(16,17,20,.10);
      text-transform:uppercase;
      letter-spacing:.05em;
      font-size:12px;
    }
    .heroIcon{
      width: 44px; height:44px;
      border-radius: 14px;
      border: 3px solid var(--ink);
      background: #fff;
      display:flex; align-items:center; justify-content:center;
      box-shadow: 6px 6px 0 rgba(16,17,20,.08);
      flex:0 0 auto;
    }
    .heroIcon i{color: var(--red)}
    .title{
      margin: 14px 0 6px;
      font-size: clamp(26px, 4vw, 38px);
      line-height:1.0;
      text-transform:uppercase;
    }
    .subtitle{
      margin: 0;
      font-weight:800;
      color: var(--muted);
      max-width: 85ch;
      line-height:1.4;
    }
    .callout{
      margin-top: 14px;
      padding: 14px 14px;
      border-radius: 16px;
      border: 3px dashed rgba(16,17,20,.25);
      background: rgba(255,255,255,.92);
      font-weight:800;
      color: var(--ink);
    }
    .callout strong{font-weight:900}

    /* content */
    .board{ padding: 16px; background:#fff; }
    .grid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 14px;
      align-items:start;
    }

    .card{
      border-radius: var(--radius);
      border: 3px solid var(--ink);
      background: var(--paper);
      box-shadow: 10px 10px 0 rgba(16,17,20,.08);
      overflow:hidden;
    }
    .cardHead{
      padding: 12px 14px;
      display:flex; align-items:center; justify-content:space-between; gap:10px;
      border-bottom: 3px solid rgba(16,17,20,.12);
      background: rgba(255,201,40,.22);
    }
    .cardHead h3{
      margin:0;
      font-size: 16px;
      text-transform:uppercase;
      letter-spacing:.03em;
      line-height:1.1;
    }
    .chip{
      display:inline-flex; align-items:center; gap:8px;
      padding: 8px 10px;
      border-radius: 999px;
      background:#fff;
      border:2px solid rgba(16,17,20,.10);
      font-weight:900;
      text-transform:uppercase;
      letter-spacing:.05em;
      font-size: 11px;
      white-space:nowrap;
    }
    .dot{width:12px;height:12px;border-radius:999px;}
    .dot.y{background:var(--yellow)}
    .dot.r{background:var(--red)}
    .dot.t{background:var(--turq)}

    .cardBody{ padding: 14px; }

    /* postits */
    .postits{ display:flex; flex-wrap:wrap; gap:10px; margin-top:8px; }
    .postit{
      padding: 10px 10px;
      border-radius: 14px;
      border: 2px solid rgba(16,17,20,.20);
      font-weight:900;
      font-size: 12px;
      box-shadow: 6px 6px 0 rgba(16,17,20,.06);
      transform: rotate(-1deg);
      background: rgba(255,201,40,.28);
      display:inline-flex; align-items:center; gap:8px;
    }
    .postit:nth-child(2n){ transform: rotate(1.5deg); }
    .postit:nth-child(3n){ transform: rotate(-2deg); }
    .postit i{ width:16px; height:16px; color: rgba(16,17,20,.75); }

    .smallHint{ margin-top: 10px; font-size: 12px; color: var(--muted); font-weight:800; }

    /* inputs */
    label{
      display:block;
      font-weight:900;
      font-size: 12px;
      text-transform:uppercase;
      letter-spacing:.06em;
      margin: 10px 0 6px;
      color: rgba(16,17,20,.85);
    }
    textarea, input[type="text"]{
      width:100%;
      border: 3px solid rgba(16,17,20,.14);
      border-radius: 14px;
      padding: 12px 12px;
      font-family: inherit;
      font-size: 14px;
      font-weight:700;
      background: rgba(255,255,255,.92);
      outline:none;
      transition: .15s ease;
    }
    textarea{ min-height: 92px; resize: vertical; }
    textarea:focus, input[type="text"]:focus{
      border-color: var(--yellow);
      box-shadow: 0 0 0 6px rgba(255,201,40,.22);
    }

    .row2{ display:grid; grid-template-columns: 1fr 1fr; gap: 10px; }

    /* skills chips */
    .skills{
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      margin-top: 10px;
    }
    .skill{
      display:inline-flex; align-items:center; gap:8px;
      padding: 10px 10px;
      border-radius: 999px;
      border: 2px solid rgba(16,17,20,.14);
      background:#fff;
      font-weight:900;
      font-size: 12px;
      color: rgba(16,17,20,.80);
      box-shadow: 0 8px 16px rgba(16,17,20,.06);
      cursor:pointer;
      user-select:none;
      transition:.12s ease;
    }
    .skill:hover{ transform: translateY(-1px); border-color: rgba(198,40,40,.35); }
    .skill.active{
      border-color: var(--red);
      box-shadow: 0 12px 20px rgba(198,40,40,.12);
    }
    .skill .tag{
      width:10px; height:10px; border-radius:999px; background: rgba(198,40,40,.20);
    }
    .skill.active .tag{ background: var(--red); }

    /* sectors */
    .sectors{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:10px 12px;
      margin-top: 10px;
    }
    .sector{
      display:flex; align-items:flex-start; gap:10px;
      border-radius: 14px;
      border: 2px solid rgba(16,17,20,.10);
      background: rgba(255,255,255,.92);
      padding: 10px 10px;
      font-weight:900;
      color: rgba(16,17,20,.80);
    }
    .sector input{ margin-top:2px; width:18px; height:18px; accent-color: var(--yellow); }

    /* sentence builder */
    .sentence{
      border-radius: 18px;
      border: 3px solid rgba(16,17,20,.16);
      background: rgba(255,201,40,.18);
      padding: 14px 14px;
      box-shadow: 10px 10px 0 rgba(16,17,20,.06);
    }
    .sentence p{ margin:0; font-weight:900; }
    .sentence .line{
      margin-top:10px;
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:10px;
    }
    .sentence input{
      border-color: rgba(16,17,20,.16);
    }
    .preview{
      margin-top: 10px;
      padding: 12px 12px;
      border-radius: 14px;
      border: 2px dashed rgba(16,17,20,.22);
      background: #fff;
      font-weight:900;
      color: rgba(16,17,20,.85);
      line-height:1.35;
    }

    /* actions */
    .actions{
      padding: 14px 16px 18px;
      background:#fff;
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      align-items:center;
      justify-content:space-between;
      border-top: 3px solid rgba(16,17,20,.10);
    }
    .note{
      font-size: 12px;
      font-weight:900;
      color: var(--muted);
      max-width: 80ch;
      line-height:1.4;
    }
    .btns{display:flex; gap:10px; flex-wrap:wrap;}
    .btn{
      appearance:none;
      border:none;
      cursor:pointer;
      border-radius: 14px;
      padding: 12px 14px;
      font-weight:900;
      text-transform:uppercase;
      letter-spacing:.06em;
      display:inline-flex;
      align-items:center;
      gap:10px;
      box-shadow: 0 10px 20px rgba(16,17,20,.10);
      transition:.18s ease;
    }
    .btn:hover{ transform: translateY(-2px); box-shadow: 0 16px 28px rgba(16,17,20,.14); }
    .btn-primary{ background: var(--ink); color:#fff; }
    .btn-yellow{ background: var(--yellow); color: var(--ink); }
    .btn-ghost{ background:#fff; color: var(--ink); border: 3px solid rgba(16,17,20,.14); }

    @media (max-width: 860px){
      .grid{ grid-template-columns: 1fr; }
      .sectors{ grid-template-columns: 1fr; }
      .row2{ grid-template-columns: 1fr; }
      .sentence .line{ grid-template-columns: 1fr; }
      .badge{ display:none; }
    }
  </style>
</head>

<body>
  <div class="bg" aria-hidden="true">
    <div class="blob b1"></div><div class="blob b2"></div><div class="blob b3"></div><div class="blob b4"></div>
  </div>

  <main class="wrap">
    <section class="frame">

      <div class="topbar">
        <a class="back" href="index.html">
          <i data-lucide="arrow-left" style="width:18px;height:18px;"></i>
          Retour
        </a>
        <div class="crumb">
          <i data-lucide="sparkles" style="width:18px;height:18px;"></i>
          Cr√©er
        </div>
        <div class="badge">
          <span style="display:inline-flex;align-items:center;gap:8px;">
            <span style="width:10px;height:10px;border-radius:999px;background:var(--yellow);display:inline-block;"></span>
            Exp√©rience perso ‚Üí valeur pro
          </span>
        </div>
      </div>

      <section class="hero">
        <div class="heroCard">
          <div class="grain" aria-hidden="true"></div>

          <div class="heroTop">
            <div class="kicker">
              <i data-lucide="hammer" style="width:18px;height:18px;"></i>
              Module 2 ‚Äî CR√âER
            </div>
            <div class="heroIcon" aria-hidden="true">
              <i data-lucide="zap" style="width:22px;height:22px;"></i>
            </div>
          </div>

          <h1 class="title">CR√âER ‚Äî Ce que je sais d√©j√† faire pour √™tre utile</h1>
          <p class="subtitle">
            Tu n‚Äôas pas besoin d‚Äôun ‚Äúgrand CV‚Äù pour avoir de la valeur : tes exp√©riences perso
            montrent d√©j√† des <strong>comp√©tences</strong>. Ici, tu les rends visibles et tu transformes √ßa en phrase pro.
          </p>

          <div class="callout">
            üëâ <strong>Ton exp√©rience perso = d√©j√† de la valeur pro.</strong>
          </div>
        </div>
      </section>

      <section class="board">
        <div class="grid">

          <!-- 1 - Experiences -->
          <article class="card">
            <div class="cardHead">
              <h3>üîß Choses que j‚Äôai d√©j√† faites</h3>
              <span class="chip"><span class="dot y"></span>Post-it</span>
            </div>
            <div class="cardBody">
              <p style="margin:0; font-weight:800; color:var(--muted); font-size:13px;">
                Note tout ce que tu as d√©j√† fait dans la vraie vie (m√™me ‚Äúpetit‚Äù).
              </p>

              <div class="postits" aria-label="Exemples">
                <span class="postit"><i data-lucide="truck"></i>Aider √† d√©m√©nager</span>
                <span class="postit"><i data-lucide="baby"></i>Garder des enfants</span>
                <span class="postit"><i data-lucide="heart-handshake"></i>Aider un grand-parent</span>
                <span class="postit"><i data-lucide="tool"></i>Bricoler</span>
                <span class="postit"><i data-lucide="package"></i>Monter un meuble</span>
                <span class="postit"><i data-lucide="party-popper"></i>Organiser une f√™te</span>
                <span class="postit"><i data-lucide="wallet"></i>G√©rer une caisse asso</span>
                <span class="postit"><i data-lucide="construction"></i>Aider sur chantier</span>
                <span class="postit"><i data-lucide="sprout"></i>Jardiner</span>
                <span class="postit"><i data-lucide="bike"></i>R√©parer v√©lo / scooter</span>
              </div>

              <label for="faits">Mes exp√©riences (liste)</label>
              <textarea id="faits" placeholder="Ex : d√©m√©nagement (porter + organiser) / garder enfants / aider papi (courses) / montage meuble / aider sur chantier / r√©paration v√©lo‚Ä¶"></textarea>

              <div class="smallHint">
                üí° Ajoute si possible : <strong>o√π</strong> / <strong>avec qui</strong> / <strong>combien de temps</strong> / <strong>ce qui √©tait difficile</strong>.
              </div>
            </div>
          </article>

          <!-- 2 - Hidden skills -->
          <article class="card">
            <div class="cardHead" style="background: rgba(198,40,40,.10);">
              <h3>üß† Comp√©tences cach√©es derri√®re</h3>
              <span class="chip"><span class="dot r"></span>Comp√©tences</span>
            </div>
            <div class="cardBody">
              <p style="margin:0; font-weight:800; color:var(--muted); font-size:13px;">
                Clique pour s√©lectionner. Tu peux en choisir plusieurs.
              </p>

              <div class="skills" id="skills">
                <div class="skill" data-skill="Organisation"><span class="tag"></span>Organisation</div>
                <div class="skill" data-skill="Relation client"><span class="tag"></span>Relation client</div>
                <div class="skill" data-skill="Travail √©quipe"><span class="tag"></span>Travail √©quipe</div>
                <div class="skill" data-skill="Logique"><span class="tag"></span>Logique</div>
                <div class="skill" data-skill="Manuel / technique"><span class="tag"></span>Manuel / technique</div>
                <div class="skill" data-skill="Autonomie"><span class="tag"></span>Autonomie</div>
                <div class="skill" data-skill="Gestion stress"><span class="tag"></span>Gestion stress</div>
                <div class="skill" data-skill="Respect consignes"><span class="tag"></span>Respect consignes</div>
              </div>

              <label for="skillsPlus">Autres comp√©tences (si tu veux)</label>
              <input id="skillsPlus" type="text" placeholder="Ex : ponctualit√©, pr√©cision, sens du service, s√©curit√©‚Ä¶" />

              <div class="smallHint">
                ‚úÖ Ton objectif : relier au moins <strong>2 exp√©riences</strong> √† <strong>3 comp√©tences</strong>.
              </div>
            </div>
          </article>

          <!-- 3 - Local sectors -->
          <article class="card">
            <div class="cardHead" style="background: rgba(32,184,174,.14);">
              <h3>üè¢ O√π √ßa peut servir localement</h3>
              <span class="chip"><span class="dot t"></span>Secteurs</span>
            </div>
            <div class="cardBody">
              <p style="margin:0; font-weight:800; color:var(--muted); font-size:13px;">
                Coche les secteurs o√π tes comp√©tences peuvent √™tre utiles.
              </p>

              <div class="sectors" role="group" aria-label="Secteurs">
                <label class="sector"><input type="checkbox" id="s1"> BTP</label>
                <label class="sector"><input type="checkbox" id="s2"> Logistique</label>
                <label class="sector"><input type="checkbox" id="s3"> Commerce</label>
                <label class="sector"><input type="checkbox" id="s4"> Tourisme</label>
                <label class="sector"><input type="checkbox" id="s5"> Agroalimentaire</label>
                <label class="sector"><input type="checkbox" id="s6"> Aide √† domicile</label>
                <label class="sector"><input type="checkbox" id="s7"> Industrie</label>
                <label class="sector"><input type="checkbox" id="s8"> Autre</label>
              </div>

              <label for="secteurAutre">Si ‚ÄúAutre‚Äù, pr√©cise</label>
              <input id="secteurAutre" type="text" placeholder="Ex : √©v√©nementiel, sport, m√©canique, nettoyage‚Ä¶" />

              <div class="smallHint">
                üí° Le but : faire le lien entre <strong>ta vie</strong> et <strong>les besoins du territoire</strong>.
              </div>
            </div>
          </article>

          <!-- 4 - Concrete proposal -->
          <article class="card">
            <div class="cardHead" style="background: rgba(255,176,103,.18);">
              <h3>‚≠ê Ce que je peux proposer concr√®tement</h3>
              <span class="chip"><span class="dot y"></span>Phrase pro</span>
            </div>
            <div class="cardBody">

              <div class="sentence">
                <p>üëâ Je peux aider une entreprise √† <span style="color:var(--red);">__________</span> gr√¢ce √† <span style="color:var(--red);">__________</span>.</p>

                <div class="line">
                  <div>
                    <label for="verbe">Aider √†‚Ä¶ (verbe d‚Äôaction)</label>
                    <input id="verbe" type="text" placeholder="Ex : organiser / r√©parer / accueillir / livrer / ranger‚Ä¶" />
                  </div>
                  <div>
                    <label for="grace">Gr√¢ce √†‚Ä¶ (preuve)</label>
                    <input id="grace" type="text" placeholder="Ex : mon exp√©rience d√©m√©nagement / mon bricolage / mon sens du service‚Ä¶" />
                  </div>
                </div>

                <div class="preview" id="preview">
                  Pr√©visualisation : <span style="opacity:.75;">(remplis les 2 champs)</span>
                </div>
              </div>

              <label for="exemple">Exemple concret (1 situation)</label>
              <textarea id="exemple" placeholder="Ex : Lors d‚Äôun d√©m√©nagement, j‚Äôai organis√© les cartons par pi√®ces + g√©r√© le timing ‚Üí √ßa montre organisation + travail d‚Äô√©quipe."></textarea>

              <div class="smallHint">
                ‚úÖ Objectif : avoir <strong>1 phrase pro</strong> que tu peux dire en entretien.
              </div>
            </div>
          </article>

        </div>
      </section>

      <div class="actions">
        <div class="note">
          üëâ <strong>√Ä retenir :</strong> on ne cherche pas ‚Äúun CV parfait‚Äù. On cherche une <strong>preuve</strong> que tu sais √™tre utile.
        </div>
        <div class="btns">
          <button class="btn btn-ghost" type="button" onclick="resetForm()">
            <i data-lucide="rotate-ccw" style="width:18px;height:18px;"></i>
            R√©initialiser
          </button>
          <button class="btn btn-yellow" type="button" onclick="saveLocal()">
            <i data-lucide="save" style="width:18px;height:18px;"></i>
            Sauver
          </button>
          <a class="btn btn-primary" href="habiter.html" style="text-decoration:none;">
            <i data-lucide="arrow-right" style="width:18px;height:18px;"></i>
            Continuer ‚Üí Habiter
          </a>
        </div>
      </div>

    </section>
  </main>

  <script>
    const KEY = "mls4you_territoire_creer_v1";

    function qs(id){ return document.getElementById(id); }

    function readSelectedSkills(){
      return Array.from(document.querySelectorAll('.skill.active')).map(el => el.dataset.skill);
    }

    function setSelectedSkills(list){
      const set = new Set(list || []);
      document.querySelectorAll('.skill').forEach(el=>{
        const on = set.has(el.dataset.skill);
        el.classList.toggle('active', on);
        el.setAttribute('aria-pressed', on ? 'true' : 'false');
      });
    }

    function getFields(){
      return {
        faits: qs('faits').value.trim(),
        skills: readSelectedSkills(),
        skillsPlus: qs('skillsPlus').value.trim(),
        secteurs: {
          btp: qs('s1').checked,
          logistique: qs('s2').checked,
          commerce: qs('s3').checked,
          tourisme: qs('s4').checked,
          agro: qs('s5').checked,
          aide: qs('s6').checked,
          industrie: qs('s7').checked,
          autre: qs('s8').checked,
        },
        secteurAutre: qs('secteurAutre').value.trim(),
        verbe: qs('verbe').value.trim(),
        grace: qs('grace').value.trim(),
        exemple: qs('exemple').value.trim(),
        savedAt: new Date().toISOString()
      };
    }

    function setFields(d){
      if(!d) return;
      qs('faits').value = d.faits || "";
      qs('skillsPlus').value = d.skillsPlus || "";
      setSelectedSkills(d.skills || []);

      const s = d.secteurs || {};
      qs('s1').checked = !!s.btp;
      qs('s2').checked = !!s.logistique;
      qs('s3').checked = !!s.commerce;
      qs('s4').checked = !!s.tourisme;
      qs('s5').checked = !!s.agro;
      qs('s6').checked = !!s.aide;
      qs('s7').checked = !!s.industrie;
      qs('s8').checked = !!s.autre;

      qs('secteurAutre').value = d.secteurAutre || "";
      qs('verbe').value = d.verbe || "";
      qs('grace').value = d.grace || "";
      qs('exemple').value = d.exemple || "";
      updatePreview();
    }

    function updatePreview(){
      const v = qs('verbe').value.trim();
      const g = qs('grace').value.trim();
      const p = qs('preview');
      if(!v && !g){
        p.innerHTML = `Pr√©visualisation : <span style="opacity:.75;">(remplis les 2 champs)</span>`;
        return;
      }
      const vv = v || "__________";
      const gg = g || "__________";
      p.textContent = `Pr√©visualisation : Je peux aider une entreprise √† ${vv} gr√¢ce √† ${gg}.`;
    }

    function saveLocal(){
      try{
        localStorage.setItem(KEY, JSON.stringify(getFields()));
        toast("Sauvegard√© ‚úÖ");
      }catch(e){
        toast("Impossible de sauvegarder ‚ùå");
      }
    }

    function resetForm(){
      if(!confirm("R√©initialiser tout le contenu ?")) return;
      localStorage.removeItem(KEY);
      setFields({});
      toast("R√©initialis√©");
    }

    function toast(text){
      const t = document.createElement('div');
      t.textContent = text;
      t.style.position = 'fixed';
      t.style.left = '50%';
      t.style.bottom = '18px';
      t.style.transform = 'translateX(-50%)';
      t.style.background = 'rgba(16,17,20,.92)';
      t.style.color = 'white';
      t.style.padding = '12px 14px';
      t.style.borderRadius = '14px';
      t.style.fontWeight = '900';
      t.style.letterSpacing = '.04em';
      t.style.zIndex = '9999';
      t.style.boxShadow = '0 14px 28px rgba(0,0,0,.18)';
      document.body.appendChild(t);
      setTimeout(()=>{ t.style.opacity = '0'; t.style.transition='opacity .25s ease'; }, 1100);
      setTimeout(()=>{ t.remove(); }, 1500);
    }

    // interactions
    document.addEventListener('click', (e)=>{
      const el = e.target.closest('.skill');
      if(!el) return;
      el.classList.toggle('active');
      const on = el.classList.contains('active');
      el.setAttribute('aria-pressed', on ? 'true' : 'false');
      try { localStorage.setItem(KEY, JSON.stringify(getFields())); } catch {}
    });

    ['faits','skillsPlus','secteurAutre','verbe','grace','exemple','s1','s2','s3','s4','s5','s6','s7','s8'].forEach(id=>{
      const el = qs(id);
      if(!el) return;
      el.addEventListener('input', ()=>{
        if(id === 'verbe' || id === 'grace') updatePreview();
      });
      el.addEventListener('change', ()=>{ try { localStorage.setItem(KEY, JSON.stringify(getFields())); } catch {} });
    });

    window.addEventListener('load', function(){
      try{
        const saved = JSON.parse(localStorage.getItem(KEY) || "null");
        if(saved) setFields(saved);
      }catch{}
      updatePreview();
      if (typeof lucide !== 'undefined') lucide.createIcons();
    });
  </script>
</body>
</html>


